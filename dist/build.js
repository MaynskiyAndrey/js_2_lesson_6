(()=>{var t={143:()=>{Vue.component("cart-item-cmp",{props:["item"],template:'\n\t<div class="cart-item">\n\t\t<p>{{ item.product_name }}</p>\n\t\t\t\t\t<p> : </p>\n\t\t\t\t\t<p>{{ item.price }}</p>\n\t\t\t\t\t<button  v-on:click="$emit(\'remove-item\', item)">Удалить</button>\n\t</div>'})},203:()=>{Vue.component("find",{props:["value"],template:'\n\t<div>\n\t\t<input\n\t\t\tv-bind:value="value"\n\t\t\tv-on:input="$emit(\'input\', $event.target.value)">\n\t\t<button v-on:click="$emit(\'filter-on\')" class="search-button" type="button">Искать</button>\n\t</div>\n\t'})},406:()=>{Vue.component("goods-item",{props:["good"],emits:{add:null},template:'\n    <div class="goods-item">\n      <h3>{{ good.product_name }}</h3>\n      <p>{{ good.price }}</p>\n\t  <button @click.preventDefault="addToCart(good)">Купить</button>\n    </div>\n  ',methods:{addToCart(t){this.$emit("add",t)}}})}},e={};function o(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,o),s.exports}(()=>{"use strict";o(143),Vue.component("cart-cmp",{props:["items"],template:'\n\t<div>\n\t\t<button class="cart-button" type="button" v-on:click="changeVisibleBasket">Корзина</button>\n\t\t<div class="cart" v-show="isVisibleCart">\n\t\t\t<div v-for="good in items">\n\t\t\t\t<cart-item-cmp :item="good" v-on:remove-item="removeFromCart"></cart-item-cmp>\n\t\t\t</div>\n\t\t\t<p v-show="items.length==0">Корзина пустая</p>\n\t\t</div>\n\t</div>\n\t',data:()=>({isVisibleCart:!1}),methods:{changeVisibleBasket(){this.isVisibleCart=!this.isVisibleCart},removeFromCart(t){(async(t,e)=>await fetch("/removeFromCart",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}))(0,t).then((t=>t.json())).then((t=>{this.items=t}))}}}),o(203),o(406),Vue.component("goods-list",{props:["goods"],emits:{"add-item":null},template:'\n    <div class="goods-list">\n      <goods-item v-for="good in goods" :good="good" v-on:add="addChild"></goods-item>\n    </div>\n  ',methods:{addChild(t){this.$emit("add-item",t)}}}),new Vue({el:"#app",data:{goods:[],filteredGoods:[],searchLine:"",cart:[]},methods:{makeGETRequest:t=>new Promise(((e,o)=>{var n;window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?e(n.responseText):o("Error"))},n.open("GET",t,!0),n.send()})),filterGoods(){const t=new RegExp(this.searchLine,"i");this.filteredGoods=this.goods.filter((e=>t.test(e.product_name)))},makePOSTRequest(t,e,o){let n;window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){4===n.readyState&&o(n.responseText)},n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(e)},async onAddCartItem(t){fetch("/addToCart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{this.cart=t}))}},mounted:async function(){await fetch("/catalog").then((t=>t.json())).then((t=>{this.goods=t,this.filteredGoods=t})),await fetch("/cart").then((t=>t.json())).then((t=>{this.cart=t}))}})})()})();